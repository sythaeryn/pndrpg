FILE(GLOB SRC *.cpp *.h)

ADD_LIBRARY(nel_patch_lib STATIC ${SRC})

INCLUDE_DIRECTORIES(${LIBXML2_INCLUDE_DIR} ${MAXSDK_INCLUDE_DIR})
TARGET_LINK_LIBRARIES(nel_patch_lib 
	${LIBXML2_LIBRARIES} 
	nelmisc 
	nel3d 
	${MAXSDK_LIBRARIES})
SET_TARGET_PROPERTIES(nel_patch_lib PROPERTIES 
	VERSION ${NL_VERSION}
	SOVERSION ${NL_VERSION_MAJOR}
	LINK_FLAGS_DEBUG "${CMAKE_LINK_FLAGS_DEBUG}"
	LINK_FLAGS_RELEASE "${CMAKE_LINK_FLAGS_RELEASE}"
	DEBUG_POSTFIX "_d"
	RELEASE_POSTFIX "_r"
	PROJECT_LABEL "MAX Plugin: NeL Patch Library")

ADD_DEFINITIONS(${LIBXML2_DEFINITIONS})

INSTALL(TARGETS nel_patch_lib RUNTIME DESTINATION maxplugin/plugins LIBRARY DESTINATION lib ARCHIVE DESTINATION lib COMPONENT libraries)
